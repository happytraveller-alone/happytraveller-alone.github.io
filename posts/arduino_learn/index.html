<!doctype html><html lang=zh-Hans x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>智能小车(零):Arduino编程 | 小谢同学的修行小屋</title>
<link rel=canonical href=https://happytraveller-alone.github.io/posts/arduino_learn/><meta name=author content="YuanFeng Xie"><meta name=description content="概要 Arduino是一种开源电子平台，硬件和软件简单易学，非常适合入门嵌入式系统开发的初学者。Arduino平台通过代码控制硬件设备，如LED灯、按钮、马达等，帮助用户轻松实现自己的创意。本文将带你了解Arduino的基本编程框架及常用代码语句，帮助新手快速入门Arduino开发。
"><meta name=keywords content="Arduino,Smart_car"><meta name=generator content="Hugo 0.138.0"><meta property="og:url" content="https://happytraveller-alone.github.io/posts/arduino_learn/"><meta property="og:site_name" content="小谢同学的修行小屋"><meta property="og:title" content="智能小车(零):Arduino编程"><meta property="og:description" content="概要 Arduino是一种开源电子平台，硬件和软件简单易学，非常适合入门嵌入式系统开发的初学者。Arduino平台通过代码控制硬件设备，如LED灯、按钮、马达等，帮助用户轻松实现自己的创意。本文将带你了解Arduino的基本编程框架及常用代码语句，帮助新手快速入门Arduino开发。"><meta property="og:locale" content="zh_Hans"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-09T13:04:20+08:00"><meta property="article:modified_time" content="2024-11-11T14:52:23+00:00"><meta property="article:tag" content="Arduino"><meta property="article:tag" content="Smart_car"><meta name=twitter:card content="summary"><meta name=twitter:title content="智能小车(零):Arduino编程"><meta name=twitter:description content="概要 Arduino是一种开源电子平台，硬件和软件简单易学，非常适合入门嵌入式系统开发的初学者。Arduino平台通过代码控制硬件设备，如LED灯、按钮、马达等，帮助用户轻松实现自己的创意。本文将带你了解Arduino的基本编程框架及常用代码语句，帮助新手快速入门Arduino开发。"><link rel=stylesheet href=/css/output.min.css><link rel=stylesheet href=/css/code-wrap.css><link rel=stylesheet href=/css/syntax.css><style>pre{padding:1em;overflow:auto}</style><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav class="mt-4 lg:mt-8 py-4"><div class="container flex justify-between max-w-[65ch] mx-auto px-4 md:px-0"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:online" @click="flip = !flip" title=翻转一下！><div class="h-10 rounded-full"><img src=/images/logo.png alt=小谢同学的修行小屋></div></div><div><a href=https://happytraveller-alone.github.io/ class="text-lg font-semibold cursor-pointer">小谢同学的修行小屋</a><div class="text-base-content/60 text-sm">无人扶我青云志，我自踏雪至山巅</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul class="dropdown-content menu w-36 bg-base-100 rounded-box z-[1] shadow-md"><li><div role=link tabindex=0 class="inline-flex items-center p-2 cursor-pointer" @click="flip = !flip" title=关于我><ion-icon name=information-circle></ion-icon>关于我</div></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=归档><ion-icon name=archive></ion-icon>归档</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/categories title=所有分类><ion-icon name=grid></ion-icon>所有分类</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title=所有标签><ion-icon name=pricetags></ion-icon>所有标签</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><div role=link tabindex=0 class="text-sm font-semibold cursor-pointer hover:underline" @click="flip = !flip" title=关于我>关于我</div><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/posts title=归档><ion-icon class=group-hover:text-primary-content name=archive></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/categories title=所有分类><ion-icon class=group-hover:text-primary-content name=grid></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/tags title=所有标签><ion-icon class=group-hover:text-primary-content name=pricetags></ion-icon></a></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="mt-4 px-4"><div><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content="智能小车(零):Arduino编程"><meta itemprop=description content="概要 Arduino是一种开源电子平台，硬件和软件简单易学，非常适合入门嵌入式系统开发的初学者。Arduino平台通过代码控制硬件设备，如LED灯、按钮、马达等，帮助用户轻松实现自己的创意。本文将带你了解Arduino的基本编程框架及常用代码语句，帮助新手快速入门Arduino开发。"><meta itemprop=datePublished content="2024-11-09T13:04:20+08:00"><meta itemprop=dateModified content="2024-11-11T14:52:23+00:00"><meta itemprop=wordCount content="3782"><meta itemprop=keywords content="Arduino,Smart_car"><header><h1 itemprop=headline>智能小车(零):Arduino编程</h1><p class=text-sm>星期六, 11月 9, 2024
| <span>8分钟阅读</span>
| <span>更新于
星期一, 11月 11, 2024</span></p><div class="flex justify-between"><div class="flex items-center"><div class="avatar mr-1"><div class="w-8 rounded-full"><img class=my-0 src=/images/logo.jfif alt="YuanFeng Xie"></div></div><span itemprop=author itemscope itemtype=https://schema.org/Person><span itemprop=name>YuanFeng Xie</span></span></div><div class="flex items-center gap-2"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://x.com/intent/post?text=%e6%99%ba%e8%83%bd%e5%b0%8f%e8%bd%a6%28%e9%9b%b6%29:Arduino%e7%bc%96%e7%a8%8b&amp;url=https://happytraveller-alone.github.io/posts/arduino_learn/" target=_blank rel="noopener noreferrer" title="Share on X"><ion-icon class=group-hover:text-primary-content name=logo-x></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://facebook.com/sharer/sharer.php?u=https://happytraveller-alone.github.io/posts/arduino_learn/" target=_blank rel="noopener noreferrer" title="Share on Facebook"><ion-icon class=group-hover:text-primary-content name=logo-facebook></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://wa.me/?text=%e6%99%ba%e8%83%bd%e5%b0%8f%e8%bd%a6%28%e9%9b%b6%29:Arduino%e7%bc%96%e7%a8%8b%20https://happytraveller-alone.github.io/posts/arduino_learn/" target=_blank rel="noopener noreferrer" title="Share on WhatsApp"><ion-icon class=group-hover:text-primary-content name=logo-whatsapp></ion-icon></a></div></div></header><h2 id=概要>概要</h2><p>Arduino是一种开源电子平台，硬件和软件简单易学，非常适合入门嵌入式系统开发的初学者。Arduino平台通过代码控制硬件设备，如LED灯、按钮、马达等，帮助用户轻松实现自己的创意。本文将带你了解Arduino的基本编程框架及常用代码语句，帮助新手快速入门Arduino开发。</p><h2 id=安全须知>安全须知</h2><script src=/js/pdf-js/build/pdf.js></script><style>#embed-pdf-container{position:relative;width:100%;height:auto;min-height:20vh}.pdf-canvas{border:1px solid #000;direction:ltr;width:100%;height:auto;display:none}#the-canvas{border:1px solid #000;direction:ltr;width:100%;height:auto;display:none}.pdf-paginator{text-align:center}.pdf-loadingWrapper{display:none;justify-content:center;align-items:center;width:100%;height:350px}.pdf-loading{display:inline-block;width:50px;height:50px;border:3px solid #d2d0d0;border-radius:50%;border-top-color:#383838;animation:spin 1s ease-in-out infinite;-webkit-animation:spin 1s ease-in-out infinite}#overlayText{display:none}#overlayText a{position:relative;top:10px;right:4px;color:#000;margin:auto;background-color:#eee;padding:.3em 1em;border:solid 2px;border-radius:12px;border-color:#00000030;text-decoration:none}#overlayText svg{height:clamp(1em,2vw,1.4em);width:clamp(1em,2vw,1.4em)}@keyframes spin{to{-webkit-transform:rotate(360deg)}}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}</style><div class=embed-pdf-container id=embed-pdf-container-435d6366-1><div class=pdf-loadingWrapper id=pdf-loadingWrapper-435d6366-1><div class=pdf-loading id=pdf-loading-435d6366-1></div></div><canvas class=pdf-canvas id=pdf-canvas-435d6366-1></canvas></div><div class=pdf-paginator id=pdf-paginator-435d6366-1><button id=pdf-prev-435d6366-1>Previous</button>
<button id=pdf-next-435d6366-1>Next</button> &nbsp; &nbsp;
<span><span class=pdf-pagenum id=pdf-pagenum-435d6366-1></span> / <span class=pdf-pagecount id=pdf-pagecount-435d6366-1></span>
</span><a class=pdf-source id=pdf-source-435d6366-1 href=attention.pdf>[pdf]</a></div><noscript>View the PDF file <a class=pdf-source id=pdf-source-noscript-435d6366-1 href=attention.pdf>here</a>.</noscript><script type=text/javascript>(function(){class n{constructor(e,t,n){this.uniqueID=e,this.url=t,this.options=n,this.pdfDoc=null,this.pageNum=n.renderPageNum||1,this.pageRendering=!1,this.pageNumPending=null,this.scale=3,this.canvas=document.getElementById(`pdf-canvas-${this.uniqueID}`),this.ctx=this.canvas.getContext("2d"),this.paginator=document.getElementById(`pdf-paginator-${this.uniqueID}`),this.loadingWrapper=document.getElementById(`pdf-loadingWrapper-${this.uniqueID}`),this.pageSource=document.getElementById(`pdf-source-${this.uniqueID}`),this.init()}init(){this.applyOptions(),this.loadPDF()}applyOptions(){this.options.hideLoader&&(this.loadingWrapper.style.display="none"),this.options.hidePaginator&&(this.paginator.style.display="none"),this.options.showSource||(this.pageSource.style.display="none")}loadPDF(){this.options.hideLoader||(this.loadingWrapper.style.display="flex"),t.getDocument(this.url).promise.then(e=>{this.pdfDoc=e;const t=this.pdfDoc.numPages;document.getElementById(`pdf-pagecount-${this.uniqueID}`).textContent=t,this.pageNum>t&&(this.pageNum=t),this.renderPage(this.pageNum)})}renderPage(e){this.pageRendering=!0,this.pdfDoc.getPage(e).then(e=>{const t=e.getViewport({scale:this.scale});this.canvas.height=t.height,this.canvas.width=t.width;const n={canvasContext:this.ctx,viewport:t},s=e.render(n);s.promise.then(()=>{this.pageRendering=!1,this.showContent(),this.options.watermark&&this.addWatermark(),this.pageNumPending!==null&&(this.renderPage(this.pageNumPending),this.pageNumPending=null)})}),document.getElementById(`pdf-pagenum-${this.uniqueID}`).textContent=e}queueRenderPage(e){this.pageRendering?this.pageNumPending=e:this.renderPage(e)}onPrevPage(){if(this.pageNum<=1)return;this.pageNum--,this.queueRenderPage(this.pageNum)}onNextPage(){if(this.pageNum>=this.pdfDoc.numPages)return;this.pageNum++,this.queueRenderPage(this.pageNum)}showContent(){this.loadingWrapper.style.display="none",this.canvas.style.display="block"}showLoader(){if(this.options.hideLoader)return;this.loadingWrapper.style.display="flex",this.canvas.style.display="none"}showPaginator(){this.paginator.style.display=this.options.hidePaginator?"none":"block"}showSource(){this.pageSource.style.display=this.options.showSource?"inline":"none"}addWatermark(){const e=this.canvas.getContext("2d");e.save(),e.globalAlpha=1,e.font=this.options.watermarkFontSize+" Arial",e.fillStyle=this.options.watermarkColor,e.textAlign="center",e.textBaseline="middle";const t=this.options.watermark,n=this.canvas.width/2,s=this.canvas.height/2;e.translate(n,s),e.rotate(-Math.PI/4),e.fillText(t,0,0),e.restore()}}var t=window["pdfjs-dist/build/pdf"];t.GlobalWorkerOptions.workerSrc="https://happytraveller-alone.github.io/js/pdf-js/build/pdf.worker.js";const e=new n("435d6366-1","attention.pdf",{hidePaginator:"true",hideLoader:"false",renderPageNum:parseInt("1")||1,showSource:"false",watermark:"XYF",watermarkColor:"rgba(0, 0, 0, 0.01)",watermarkFontSize:"800px"});e.options.hidePaginator||(document.getElementById("pdf-prev-435d6366-1").addEventListener("click",()=>e.onPrevPage()),document.getElementById("pdf-next-435d6366-1").addEventListener("click",()=>e.onNextPage()))})()</script><h2 id=arduino编程框架>Arduino编程框架</h2><p>Arduino编程使用的是简化的C++语言，代码文件被称为“草图（Sketch）”。每个Arduino程序都包含两个核心函数：<code>setup()</code>和<code>loop()</code>。这两个函数是Arduino编程的基本框架，负责程序的初始化和循环执行。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 在这里初始化代码
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 在这里编写主循环代码
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><ul><li>setup()函数：setup()是Arduino程序启动时首先运行的代码块，里面的代码仅执行一次。这个函数通常用于配置引脚模式（输入或输出），初始化串口通讯等。例如，指定某个引脚为输出模式，用于点亮LED灯。</li><li>loop()函数：loop()是Arduino程序的主循环。Arduino会不断重复执行这个函数中的代码，直到断电或重启设备。通常将需要连续执行的代码放在这里，比如反复检测按钮状态、控制电机转速等。</li></ul><h2 id=arduino常用代码语句>Arduino常用代码语句</h2><h3 id=1-全局变量>1. 全局变量</h3><p>在Arduino中，全局变量是声明在任意函数外部的变量，通常放在程序的最上方。全局变量可以在<code>setup()</code>、<code>loop()</code>及其它自定义函数中被访问和修改，适合用于在程序各处共享数据。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>int</span> <span class=n>ledPin</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span> <span class=c1>// LED引脚定义为10
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>ledState</span> <span class=o>=</span> <span class=kc>LOW</span><span class=p>;</span> <span class=c1>// LED初始状态
</span></span></span></code></pre></div><h3 id=2-变量类型>2. 变量类型</h3><p>Arduino支持多种变量类型，不同的类型适用于不同的数据范围和用途。常见的变量类型包括：</p><ul><li><strong><code>int</code></strong>：整数，适合存储小范围的整数，范围为 -32768 到 32767。</li><li><strong><code>unsigned int</code></strong>：无符号整数，范围为 0 到 65535。</li><li><strong><code>long</code></strong>：较大的整数类型，范围为 -2,147,483,648 到 2,147,483,647。</li><li><strong><code>float</code></strong>：浮点数类型，用于表示带小数的数值。</li><li><strong><code>char</code></strong>：字符类型，用于存储单个字符。</li><li><strong><code>const</code></strong>：常量类型，用于定义一个不可更改的固定值。常量在Arduino中经常用于定义引脚号或固定值，确保程序运行中该值不被修改。</li></ul><h4 id=示例>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>ledPin</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span> <span class=c1>// 定义一个常量引脚编号为10
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>const</span> <span class=kt>float</span> <span class=n>pi</span> <span class=o>=</span> <span class=mf>3.14</span><span class=p>;</span> <span class=c1>// 定义一个常量浮点数π的值
</span></span></span></code></pre></div><h3 id=3-pinmode-函数>3. <code>pinMode()</code> 函数</h3><p><code>pinMode()</code>用于设置指定引脚的工作模式：<strong>输出（OUTPUT）<strong>或</strong>输入（INPUT）</strong>。在使用引脚前需要设置其模式，确定其作为数据输出或数据输入。</p><h4 id=语法>语法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=nf>pinMode</span><span class=p>(</span><span class=n>pin</span><span class=p>,</span> <span class=n>mode</span><span class=p>);</span></span></span></code></pre></div><ul><li><strong>pin</strong>：指定引脚号，可以是数字引脚（如2、3、4）或其他可编程引脚。</li><li><strong>mode</strong>：指定引脚模式，可选<code>OUTPUT</code>或<code>INPUT</code>。</li></ul><h4 id=示例-1>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=nf>pinMode</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=kc>OUTPUT</span><span class=p>);</span> <span class=c1>// 将10号引脚设置为输出模式
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>pinMode</span><span class=p>(</span><span class=mi>9</span><span class=p>,</span> <span class=kc>INPUT</span><span class=p>);</span>   <span class=c1>// 将9号引脚设置为输入模式
</span></span></span></code></pre></div><ul><li><code>OUTPUT</code>模式：用于向外部设备发送电信号。例如，控制LED灯的亮灭。</li><li><code>INPUT</code>模式：用于接收外部设备的信号。例如，检测按钮是否被按下。</li></ul><h3 id=4-digitalwrite-函数>4. <code>digitalWrite()</code> 函数</h3><p><code>digitalWrite()</code>用于将指定引脚设置为高电平（HIGH）或低电平（LOW）。高电平通常表示引脚输出5V，低电平表示引脚输出0V，用于控制设备的开关状态。</p><h4 id=语法-1>语法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=nf>digitalWrite</span><span class=p>(</span><span class=n>pin</span><span class=p>,</span> <span class=n>value</span><span class=p>);</span></span></span></code></pre></div><ul><li><strong>pin</strong>：指定引脚号。</li><li><strong>value</strong>：指定要输出的值，<code>HIGH</code>（高电平，通常为5V）或<code>LOW</code>（低电平，通常为0V）。</li></ul><h4 id=示例-2>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=nf>digitalWrite</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=kc>HIGH</span><span class=p>);</span> <span class=c1>// 将10号引脚设置为高电平（输出5V）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>digitalWrite</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=kc>LOW</span><span class=p>);</span>  <span class=c1>// 将10号引脚设置为低电平（输出0V）
</span></span></span></code></pre></div><p>通过将10号引脚设为高电平，连接到该引脚的LED会亮起；设为低电平则会熄灭。</p><h3 id=5-digitalread-函数>5. <code>digitalRead()</code> 函数</h3><p><code>digitalRead()</code>用于读取数字引脚的状态，返回值为<code>HIGH</code>（高电平）或<code>LOW</code>（低电平）。常用于检测按钮等输入设备的状态。</p><h4 id=语法-2>语法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>int</span> <span class=n>buttonState</span> <span class=o>=</span> <span class=nf>digitalRead</span><span class=p>(</span><span class=n>pin</span><span class=p>);</span></span></span></code></pre></div><ul><li><strong>pin</strong>：指定的数字引脚。</li><li><strong>返回值</strong>：<code>HIGH</code>表示引脚处于高电平，<code>LOW</code>表示引脚处于低电平。</li></ul><h4 id=示例-3>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>int</span> <span class=n>buttonState</span> <span class=o>=</span> <span class=nf>digitalRead</span><span class=p>(</span><span class=mi>9</span><span class=p>);</span> <span class=c1>// 读取9号引脚的状态
</span></span></span></code></pre></div><h3 id=6-serialbegin-和-serialprint-函数>6. <code>Serial.begin()</code> 和 <code>Serial.print()</code> 函数</h3><p>Arduino通过串口通信与计算机进行数据交换。<code>Serial.begin()</code>用于初始化串口通信，而<code>Serial.print()</code>用于向串口输出数据（打印到串口监视器）。这些函数在调试时特别有用，可以查看传感器数据、变量值等信息。</p><h4 id=serialbegin-语法><code>Serial.begin()</code> 语法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=nc>Serial</span><span class=p>.</span><span class=nf>begin</span><span class=p>(</span><span class=n>baudRate</span><span class=p>);</span></span></span></code></pre></div><ul><li><strong>baudRate</strong>：指定波特率（传输速度），常用9600。</li></ul><h4 id=示例-4>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span> <span class=c1>// 初始化串口通信，波特率为9600
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><h4 id=serialprint-和-serialprintln-语法><code>Serial.print()</code> 和 <code>Serial.println()</code> 语法</h4><ul><li><strong><code>Serial.print(data)</code></strong>：在串口监视器中打印数据，不换行。</li><li><strong><code>Serial.println(data)</code></strong>：在串口监视器中打印数据并换行。</li></ul><h4 id=示例-5>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span> <span class=c1>// 初始化串口通信
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>sensorValue</span> <span class=o>=</span> <span class=nf>analogRead</span><span class=p>(</span><span class=n>A0</span><span class=p>);</span> <span class=c1>// 读取模拟引脚A0的数据
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;传感器值: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>println</span><span class=p>(</span><span class=n>sensorValue</span><span class=p>);</span> <span class=c1>// 打印数据到串口监视器
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span> <span class=c1>// 每隔1秒更新一次数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><p>在这个示例中，Arduino每隔1秒读取一次传感器的值，并将其打印到串口监视器中。使用<code>Serial.print()</code>和<code>Serial.println()</code>可以查看变量值和状态，是调试Arduino程序的重要工具。</p><h3 id=7-delay-函数>7. <code>delay()</code> 函数</h3><p><code>delay()</code>函数会暂停程序执行指定的毫秒数。常用于设置LED闪烁的时间间隔或等待某个操作完成。</p><h4 id=语法-3>语法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=nf>delay</span><span class=p>(</span><span class=n>milliseconds</span><span class=p>);</span></span></span></code></pre></div><ul><li><strong>milliseconds</strong>：暂停的时间（以毫秒为单位）。</li></ul><h4 id=示例-6>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=nf>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span> <span class=c1>// 暂停程序1秒
</span></span></span></code></pre></div><p><code>delay()</code>函数的使用可以帮助我们控制动作的间隔时间，例如LED闪烁频率。</p><h3 id=8-analogread-函数>8. <code>analogRead()</code> 函数</h3><p><code>analogRead()</code>用于读取模拟引脚的电压值，返回一个0到1023的整数值。Arduino的模拟引脚可以读取连接传感器、可变电阻等设备产生的模拟电压信号。</p><h4 id=语法-4>语法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>int</span> <span class=n>sensorValue</span> <span class=o>=</span> <span class=nf>analogRead</span><span class=p>(</span><span class=n>pin</span><span class=p>);</span></span></span></code></pre></div><ul><li><strong>pin</strong>：指定的模拟引脚（A0到A5）。</li><li><strong>返回值</strong>：返回0到1023之间的整数值，代表读取到的电压值。0表示0V，1023表示最大电压（通常为5V）。</li></ul><h4 id=示例-7>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>int</span> <span class=n>sensorPin</span> <span class=o>=</span> <span class=n>A0</span><span class=p>;</span> <span class=c1>// 定义传感器连接的模拟引脚为A0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>sensorValue</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// 用于存储读取到的值
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span> <span class=c1>// 初始化串口通讯
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>sensorValue</span> <span class=o>=</span> <span class=nf>analogRead</span><span class=p>(</span><span class=n>sensorPin</span><span class=p>);</span> <span class=c1>// 读取传感器的模拟信号
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;传感器值: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>println</span><span class=p>(</span><span class=n>sensorValue</span><span class=p>);</span> <span class=c1>// 打印读取值到串口监视器
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span> <span class=c1>// 每隔1秒读取一次
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><p>在这个示例中，<code>analogRead()</code>从A0引脚读取模拟电压，将结果转换为0到1023之间的数值。</p><h3 id=9-analogwrite-函数>9. <code>analogWrite()</code> 函数</h3><p><code>analogWrite()</code>用于向指定的引脚输出PWM信号（脉宽调制）。虽然Arduino没有直接的模拟输出功能，但通过PWM技术，可以模拟出一个接近于模拟输出的效果。<code>analogWrite()</code>函数的输出范围是0到255，用于调节LED亮度、控制电机速度等场景。</p><h4 id=语法-5>语法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=nf>analogWrite</span><span class=p>(</span><span class=n>pin</span><span class=p>,</span> <span class=n>value</span><span class=p>);</span></span></span></code></pre></div><ul><li><strong>pin</strong>：支持PWM的数字引脚（在Arduino Uno上通常是3, 5, 6, 9, 10, 和11）。</li><li><strong>value</strong>：输出的PWM值，范围为0到255。0表示无输出（0V），255表示最大输出（接近5V）。</li></ul><h4 id=示例-8>示例</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-ino data-lang=ino><span class=line><span class=cl><span class=kt>int</span> <span class=n>ledPin</span> <span class=o>=</span> <span class=mi>9</span><span class=p>;</span> <span class=c1>// 连接LED的引脚，支持PWM功能
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span><span class=p>(</span><span class=n>ledPin</span><span class=p>,</span> <span class=kc>OUTPUT</span><span class=p>);</span> <span class=c1>// 将LED引脚设置为输出模式
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>brightness</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>brightness</span> <span class=o>&lt;=</span> <span class=mi>255</span><span class=p>;</span> <span class=n>brightness</span> <span class=o>+=</span> <span class=mi>5</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>analogWrite</span><span class=p>(</span><span class=n>ledPin</span><span class=p>,</span> <span class=n>brightness</span><span class=p>);</span> <span class=c1>// 逐渐增加亮度
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>delay</span><span class=p>(</span><span class=mi>30</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>brightness</span> <span class=o>=</span> <span class=mi>255</span><span class=p>;</span> <span class=n>brightness</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>brightness</span> <span class=o>-=</span> <span class=mi>5</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>analogWrite</span><span class=p>(</span><span class=n>ledPin</span><span class=p>,</span> <span class=n>brightness</span><span class=p>);</span> <span class=c1>// 逐渐减少亮度
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>delay</span><span class=p>(</span><span class=mi>30</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>在这个示例中，<code>analogWrite()</code>控制LED的亮度变化。通过逐渐改变PWM值，LED的亮度会从暗变亮，再从亮变暗，形成呼吸灯的效果。</p><h2 id=io资源分配>IO资源分配</h2><table><thead><tr><th>IO引脚</th><th>功能</th><th>配置</th><th>特殊函数库</th><th>函数</th></tr></thead><tbody><tr><td>2</td><td>左后轮电机逆时针旋转端口</td><td>OUTPUT</td><td>SoftPWM.h</td><td></td></tr><tr><td>4</td><td>左后轮电机顺时针旋转端口</td><td>OUTPUT</td><td>SoftPWM.h</td><td></td></tr><tr><td>5</td><td>风扇继电器控制端口</td><td>OUTPUT</td><td></td><td>digitalWrite()</td></tr><tr><td>6</td><td>左侧循迹端口</td><td>OUTPUT</td><td></td><td></td></tr><tr><td>7</td><td>右后轮电机顺时针旋转端口</td><td>OUTPUT</td><td>SoftPWM.h</td><td>SoftPWMSet()</td></tr><tr><td>8</td><td>右后轮电机逆时针旋转端口</td><td>OUTPUT</td><td>SoftPWM.h</td><td></td></tr><tr><td>9</td><td>前轮舵机控制端口</td><td>OUTPUT</td><td>Servo.h</td><td>myservo.write()</td></tr><tr><td>10</td><td>车辆板载LED灯接口</td><td>OUTPUT</td><td></td><td>millis()</td></tr><tr><td>11</td><td>超声波模块声波发送端口</td><td>OUTPUT</td><td></td><td>digitalWrite()</td></tr><tr><td>12</td><td>超声波模块声波接收端口</td><td>INPUT</td><td></td><td>pulseIn()</td></tr><tr><td>13</td><td>蜂鸣器控制端口</td><td>OUTPUT</td><td></td><td>digitalWrite()</td></tr><tr><td>15</td><td>左侧避障端口</td><td>INPUT</td><td></td><td>analogRead()</td></tr><tr><td>16</td><td>右侧避障端口</td><td>INPUT</td><td></td><td>analogRead()</td></tr><tr><td>17</td><td>右侧循迹端口</td><td>OUTPUT</td><td></td><td></td></tr><tr><td>A0</td><td>电压检测端口</td><td></td><td></td><td>analogRead()</td></tr><tr><td></td><td>串口接口</td><td></td><td></td><td>Serial.available()</td></tr><tr><td></td><td></td><td></td><td></td><td>Serial.read()</td></tr></tbody></table><h2 id=硬件连接和配置>硬件连接和配置</h2><p>在进行Arduino编程前，需要正确设置硬件连接和Arduino IDE的相关配置，以确保程序能够顺利上传并运行。</p><h3 id=1-硬件连接>1. 硬件连接</h3><ul><li><p><strong>跳线帽设置</strong>：根据具体应用，将跳线帽设置为不同的工作模式。例如：</p><ul><li><strong>下载模式</strong>：将跳线帽设置为下载模式，以便可以将代码上传到Arduino。</li><li><strong>PS2手柄模式</strong>：如果需要通过PS2手柄控制小车，则需要将跳线帽调整到PS2手柄模式。</li></ul></li><li><p><strong>引脚连接</strong>：根据上文的IO资源分配表，将各个功能引脚连接到相应的外部设备。例如：</p><ul><li>将LED连接到指定的<code>ledPin</code>引脚。</li><li>将超声波模块的触发引脚（发送端口）连接到指定的引脚，并连接接收端口。</li><li>将电机驱动模块的控制引脚连接到左后轮和右后轮对应的引脚。</li></ul></li></ul><h3 id=2-arduino-ide设置>2. Arduino IDE设置</h3><p>在Arduino IDE中进行以下设置，以确保代码能够正确上传到Arduino板：</p><ul><li><p><strong>选择开发板</strong>：</p><ul><li>打开Arduino IDE，点击菜单栏的“工具” -> “开发板”，选择<strong>Arduino Nano</strong>作为开发板。</li></ul></li><li><p><strong>选择处理器</strong>：</p><ul><li>对于Arduino Nano，请选择<strong>ATmega328P</strong>或<strong>ATmega328P (Old Bootloader)</strong>，根据您的板子型号选择正确的处理器。</li></ul></li><li><p><strong>串口选择</strong>：</p><ul><li>将Arduino板通过USB线连接到计算机。再次点击“工具” -> “端口”，选择Arduino板对应的<strong>串口</strong>（例如COM3或其他可用端口）。选择正确的串口可以确保程序能够上传到Arduino。</li></ul></li></ul><h3 id=3-程序上传>3. 程序上传</h3><ul><li><p>完成以上配置后，点击“上传”按钮，将代码上传到Arduino板。上传完成后，Arduino板将按照编写的程序执行指定的功能。</p></li><li><p><strong>注意</strong>：在上传过程中，如果出现“串口占用”或“板子选择错误”等提示，请检查串口是否被其他程序占用，并确认开发板型号和串口选择是否正确。</p></li></ul><p>以上步骤完成后，您可以在Arduino板上观察到硬件的反应，例如LED闪烁、风扇控制、超声波测距等，实现您的Arduino项目。</p></article></div></div><footer class="flex justify-between items-center gap-2 max-w-[65ch] mx-auto px-4 md:px-0 py-12"><div><p>© 2024 小谢同学的修行小屋</p><p class=text-sm>🌱
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center h-[32px] px-2 gap-2 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="max-w-[65ch] mt-8 mx-auto px-4"><div><div class="mb-4 text-lg font-medium">关于我</div><div class="prose dark:prose-invert"><p><figure><img src=/resume/profile2.png width=100></figure>一名喜欢RUST的菜鸟程序员</p><h4 id=教育背景研二在读>教育背景（研二在读）</h4><ul><li>2019.09 - 2023.06 天津大学 · 智能与计算学部 · 网络安全专业 · 全日制 · 本科</li><li>2023.09 - 2026.06 天津大学 · 智能与计算学部 · 电子信息专业 · 全日制 · 硕士研究生</li></ul></div></div><div class="divider divider-vertical"></div><div><div class="mb-4 text-lg font-medium">浏览器漏洞挖掘项目</div><div class="prose dark:prose-invert"><p><strong>V8引擎的模糊测试工具改进</strong></p><p>时间：2021.09-2022.04</p><p>内容：聚焦于优化JavaScript引擎的测试方法。研究团队基于SOAT改进部署了V8引擎测试环境，并通过分析测例覆盖率和已知CVE，优化了测试流程。</p><p>成果：成功捕获了一个谷歌引擎的<a href="https://bugs.chromium.org/p/v8/issues/detail?id=12563">逻辑漏洞</a>，获得了修复反馈</p><p><strong>JS引擎WASM模块漏洞挖掘研究</strong></p><p>时间：2023.11-2024.4</p><p>内容：阅读标准手动编写了WASM语法规则，调研了主流JS引擎的WASM支持情况，并基于V8构建了WASM二进制框架。</p><p>成果：<a href=https://github.com/happytraveller-alone/antlr_wat/tree/main/wat_grammar_check_java>语法规则</a>、调研报告和<a href=https://github.com/happytraveller-alone/antlr_wat/tree/main/wasm_domato>二进制构建框架</a>，成功捕获<a href="https://bugs.webkit.org/show_bug.cgi?id=271030">特性缺陷</a>并得到修复</p></div></div><div class="divider divider-vertical"></div><div><div class="mb-4 text-lg font-medium">数据库缺陷研究项目</div><div class="prose dark:prose-invert"><p><strong>关系型数据库缺陷的实证研究</strong></p><p>时间：2022.12-2023.11</p><p>内容：通过构建统一的数据库逻辑框架，系统收集并分析了大量数据库缺陷。对777个缺陷进行了深入分析，特别聚焦SQL数据类型问题，并据此改进了模糊测试方法。</p><p>成果：构建<a href=https://github.com/sqlttest/SQLT/blob/main/dataset.xlsx>缺陷数据集</a>, 开发<a href=https://github.com/sqlttest/SQLT>SQLT测试框架</a>。</p></div></div><div class="divider divider-vertical"></div><div><div class="mb-4 text-lg font-medium">网络协议漏洞挖掘项目</div><div class="prose dark:prose-invert"><p><strong>基于 RFC的 SSL/TLS模糊测试</strong></p><p>时间：2024.4 – today</p><p>内容：梳理TLS协议模糊测试的相关工作，关注基于状态机的网络协议模糊测试方法。复现历史漏洞，了解TLS报文结构，追溯相关漏洞代码。分析RFC文档，提取字段约束，构建状态转移范式，并据此完善了TLS协议的有限状态机模型。</p><p>成果：完成相关工作调研, 漏洞复现报告, <strong>状态范式数据集</strong></p></div></div><div class="divider divider-vertical"></div></div></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=/js/main.min.js></script><script type=module src=https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.esm.js></script><script nomodule src=https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.js></script><script defer src=/js/clipboard/clipboard.js></script><link rel=stylesheet href=/css/copy-paste.css></body></html>